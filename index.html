<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Ferrin's Arcade</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.jsdelivr.net/npm/phaser@3/dist/phaser.js"></script>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#d12458">
    <meta name="viewport"
        content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta property="og:title" content="Ferrin's Arcade" />
    <meta property="og:description" content="A collection of arcade minigames built for da One and Oni Ferrin." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://thedorkknightcodes.github.io/happy-birthday-ferrin/" />
    <meta property="og:image" content="https://thedorkknightcodes.github.io/happy-birthday-ferrin/icons/icon-512.png" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Ferrin's Arcade" />
    <meta name="twitter:description" content="A collection of arcade minigames built for da One and Oni Ferrin." />
    <meta name="twitter:image" content="https://thedorkknightcodes.github.io/happy-birthday-ferrin/icons/icon-512.png" />
</head>

<body>
    <div id="game-container"></div>

    <script type="module" src="js/main.js"></script>
</body>
<script>
    if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
            navigator.serviceWorker.register("./service-worker.js");
        });
        navigator.serviceWorker.addEventListener("controllerchange", () => {
            window.location.reload();
        });
    }
</script>
<script>
    let deferredInstallPrompt = null;

    window.addEventListener("beforeinstallprompt", e => {
        e.preventDefault(); // stop browser auto-prompt
        deferredInstallPrompt = e;

        // Optional: show your own UI
        showInstallButton();
    });

    function showInstallButton() {
        const btn = document.createElement("button");
        btn.textContent = "Install Ferrin's Arcade as web app";
        btn.style.position = "fixed";
        btn.style.bottom = "16px";
        btn.style.right = "16px";
        btn.style.padding = "10px 14px";
        btn.style.borderRadius = "8px";
        btn.style.border = "none";
        btn.style.background = "#222";
        btn.style.color = "#fff";
        btn.style.fontSize = "14px";
        btn.style.zIndex = "9999";
        btn.style.userSelect = "none";
        btn.style.webkitUserSelect = "none";
        btn.style.touchAction = "manipulation";
        btn.style.webkitTouchCallout = "none";


        btn.onclick = async () => {
            btn.remove();
            deferredInstallPrompt.prompt();
            await deferredInstallPrompt.userChoice;
            deferredInstallPrompt = null;
        };

        document.body.appendChild(btn);
    }

    function isIOS() {
        return /iphone|ipad|ipod/i.test(navigator.userAgent);
    }

    function isInStandaloneMode() {
        return window.navigator.standalone === true;
    }

    if (isIOS() && !isInStandaloneMode()) {
        const hint = document.createElement("div");
        hint.textContent = "To create shortcut, tap Share â†’ Add to Home Screen";
        hint.style.position = "fixed";
        hint.style.bottom = "64px";
        hint.style.left = "50%";
        hint.style.transform = "translateX(-50%)";
        hint.style.background = "rgba(0,0,0,0.8)";
        hint.style.color = "#fff";
        hint.style.padding = "10px 14px";
        hint.style.borderRadius = "10px";
        hint.style.fontSize = "14px";
        hint.style.zIndex = "9999";
        hint.style.userSelect = "none";
        hint.style.webkitUserSelect = "none";
        hint.style.webkitTouchCallout = "none";

        document.body.appendChild(hint);

        // Remove the hint after 5 seconds
        setTimeout(() => {
            hint.remove();
        }, 5000);
    }

</script>

</html>