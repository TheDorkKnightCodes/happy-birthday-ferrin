<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Ferrin's Arcade</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.jsdelivr.net/npm/phaser@3/dist/phaser.js"></script>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#000000">
    <meta name="viewport"
        content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>

<body>
    <div id="game-container"></div>

    <script type="module" src="js/main.js"></script>
</body>
<script>
    if ("serviceWorker" in navigator) {
        window.addEventListener("load", () => {
            navigator.serviceWorker.register("./service-worker.js");
        });
        navigator.serviceWorker.addEventListener("controllerchange", () => {
            window.location.reload();
        });
    }
</script>
<script>
    let deferredInstallPrompt = null;

    window.addEventListener("beforeinstallprompt", e => {
        e.preventDefault(); // stop browser auto-prompt
        deferredInstallPrompt = e;

        // Optional: show your own UI
        showInstallButton();
    });

    function showInstallButton() {
        const btn = document.createElement("button");
        btn.textContent = "Install Ferrin's Arcade as web app";
        btn.style.position = "fixed";
        btn.style.bottom = "16px";
        btn.style.right = "16px";
        btn.style.padding = "10px 14px";
        btn.style.borderRadius = "8px";
        btn.style.border = "none";
        btn.style.background = "#222";
        btn.style.color = "#fff";
        btn.style.fontSize = "14px";
        btn.style.zIndex = "9999";

        btn.onclick = async () => {
            btn.remove();
            deferredInstallPrompt.prompt();
            await deferredInstallPrompt.userChoice;
            deferredInstallPrompt = null;
        };

        document.body.appendChild(btn);
    }
</script>

</html>